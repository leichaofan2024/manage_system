<div class="contentpanel">
  <div class="panel">
    <div class="panel-heading">
      <h4>各职务收入对比(2017年3月-7月对比2018年3-7月)</h4>

        <button type="button" class="btn btn-info" onclick="getQuarter()">本季度</button>
        <button type="button" class="btn btn-success" onclick="getLastQuarter(today.getFullYear() )">上季度</button>
        <button type="button" class="btn btn-primary" onclick="thisYear()">本年度</button>
        <button type="button" class="btn btn-light" onclick="lastYear()">上年度</button>


    </div>
    <div class="panel-body">
      <form class="form-inline">
        <input id="beginTime" value="">
        <input id="endTime" value="">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">确定</button>
      </form>
    </div>
    <div class="panel">
    </div>
  </div>
</div>
<script type="text/javascript">
Date.prototype.format =function(format)
  {
  var o = {
  "M+" : this.getMonth()+1, //month
  "d+" : this.getDate(), //day
  "h+" : this.getHours(), //hour
  "m+" : this.getMinutes(), //minute
  "s+" : this.getSeconds(), //second
  "q+" : Math.floor((this.getMonth()+3)/3), //quarter
  "S" : this.getMilliseconds() //millisecond
  }
  if(/(y+)/.test(format)) format=format.replace(RegExp.$1,
  (this.getFullYear()+"").substr(4- RegExp.$1.length));
  for(var k in o)if(new RegExp("("+ k +")").test(format))
  format = format.replace(RegExp.$1,
  RegExp.$1.length==1? o[k] :
  ("00"+ o[k]).substr((""+ o[k]).length));
  return format;
  }
  var today = new Date();

  function getQuarter(){
      var nowToday = today.getMonth();
      var quarter = 0;
      var endQuarter = 0;
      if (8 < nowToday) {
        quarter = 9;
        endQuarter = 11;
      }
      if (5 < nowToday && nowToday < 9) {
        quarter = 6;
        endQuarter = 8;
      }
      if (2 < nowToday && nowToday < 6) {
        quarter = 3;
        endQuarter = 5;
      }
      if (nowToday < 3) {
        quarter = 0;
        endQuarter = 2;
      }
      //得到上一个月的第一天
      var lastMonthFirstDay = new Date(today.getFullYear() , quarter, 1);
      //得到本月第一天
      var nowMonthFirstDay = new Date(today.getFullYear() ,endQuarter, 1);

      document.getElementById("beginTime").value = lastMonthFirstDay.format('yyyy-MM');
      document.getElementById("endTime").value = nowMonthFirstDay.format('yyyy-MM');
  }

  function getLastQuarter(year){
      var nowToday = today.getMonth();
      var lastquarter = 0;
      var lastendQuarter = 0;
      if (8 < nowToday) {
        lastquarter = 6;
        lastendQuarter = 8;
      }
      if (5 < nowToday && nowToday < 9) {
        lastquarter = 3;
        lastendQuarter = 5;
      }
      if (2 < nowToday && nowToday < 6) {
        lastquarter = 0;
        lastendQuarter = 2;
      }
      if (nowToday < 3) {
        year -- ;
        lastquarter = 6;
        lastendQuarter = 8;
      }
      //得到上一个季度的第一天
      var lastQuarterFirstDay = new Date(year, lastquarter , 1);
      //得到本月第一天
      var nowMonthFirstDay = new Date(year, lastendQuarter, 1);
      document.getElementById("beginTime").value = lastQuarterFirstDay.format('yyyy-MM');
      document.getElementById("endTime").value = nowMonthFirstDay.format('yyyy-MM');
  }
  function thisYear() {
      var nowYear = new Date(today.getFullYear() , 0, 1);
      var endYear = new Date(today.getFullYear() , 11, 31);
      document.getElementById("beginTime").value = nowYear.format('yyyy-MM');
      document.getElementById("endTime").value = endYear.format('yyyy-MM');
    }

  function lastYear() {
    var now = today.getFullYear();
     now -- ;
    var lastFirstYear = new Date(now, 0,1);
    var lastEndYear = new Date(now, 11, 31);

    document.getElementById("beginTime").value = lastFirstYear.format('yyyy-MM');
    document.getElementById("endTime").value = lastEndYear.format('yyyy-MM');
  }

</script>
