<!DOCTYPE html>
<html>
  <head>
    <title>北京供电段管理系统</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <%= Gon::Base.render_data({}) %>
    <div style="height:70px;">
      <%= render 'common/navbar'%>
    </div>
    <div class="sidebar data-background-color="white" data-active-color="danger" " >
      <div class="logo">
        <a class="simple-text logo-normal" href="/">北京供电段管理系统</a>
      </div>

      <div class="sidebar-wrapper">
        <ul class="nav">
          <li class="nav-item active" onclick="openModule(event, 'Employee')">
            <a class="nav-link" href="/employees">
              <i  class="fa fa-address-card  material-icons"></i>
              <p>现员管理</p>
            </a>
          </li>
          <li class="nav-item" onclick="openModule(event, 'Attendance')">
            <% if (current_user.has_role? :groupadmin) || (current_user.has_role? :organsadmin) %>
              <a class="nav-link" href="/attendances/group">
                <i  class="fa fa-tasks  material-icons"></i>
                <p>考勤管理</p>
              </a>
            <% elsif current_user.has_role? :workshopadmin%>
              <a class="nav-link" href="/attendances/workshop">
                <i  class="fa fa-tasks  material-icons"></i>
                <p>考勤管理</p>
              </a>
            <% elsif (current_user.has_role? :attendance_admin) || (current_user.has_role? :superadmin) %>
              <a class="nav-link" href="/attendances/duan">
                <i  class="fa fa-tasks  material-icons"></i>
                <p>考勤管理</p>
              </a>
            <% end %>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/employees">
              <i  class="fa fa-balance-scale  material-icons"></i>
              <p>定额管理</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/employees">
              <i  class="fa fa-check-square  material-icons"></i>
              <p>奖惩管理</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/employees">
              <i  class="fa fa-credit-card  material-icons"></i>
              <p>工资管理</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/employees">
              <i  class="fa fa-cog  material-icons"></i>
              <p>权限设置</p>
            </a>
          </li>
        </ul>
      </div>
    </div>

  <div class="main_content fold-main has-content">
    <%= yield %>
  </div>

 <script>
   function openModule(evt, moduleName) {
     var i, tabcontent, tablinks;

     tabcontent = document.getElementByClassName("main-18rau_0");
     for (i = 0; i < tabcontent.length; i++) {
       tabcontent[i].style.display = "none";
     }

     tablinks = document.getElementByClassName("nav-item");
     for (i = 0; i < tablinks.length; i++ ) {
       tablinks[i].className = tablinks[i].className.replace(" active", "");
     }
     document.getElementById(moduleName).style.display = "block";
     evt.currentTarget.className += " active";
   }
 </script>
</body>
</html>
