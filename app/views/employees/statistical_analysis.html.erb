<!DOCTYPE HTML>
    <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1"> 
        </head>
       
        <body>
        <!-- 年龄分析饼图-开始  -->    
            <!-- 给饼图准备一个合适大小的dom  -->
            <div id="container1" style="min-width:800px;height:600px"></div>
            <!-- 引入highcharts库  -->
            <script src="/assets/javascripts/highcharts.js"></script>
            <script>
                $(function () {
                    var chart1 = $('#container1').highcharts({
                        chart: {
                            plotBackgroundColor: null,
                            plotBorderWidth: null,
                            plotShadow: false,
                            type: 'pie'
                        },
                        title: {
                            text: '年龄分析'
                        },
                        // 数据提示框设置
                        tooltip: {
                            headerFormat: '',
                            pointFormat: '{point.name}:<br> 百分比：<b>{point.percentage:.1f}%</b>, <br>数量：<b>{point.y}</b>'
                        },

                        plotOptions: {
                            pie: {
                                allowPointSelect: true,
                                cursor: 'pointer',
                                // 设置点击饼图的事件
                                events: {
                                    click: function(e) {
                                        location.href = e.point.url
                                    }
                                },
                                dataLabels: {
                                    enabled: true,
                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                    style: {
                                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                    }
                                },
                                // 设置是否显示图例
                                showInLegend: true
                            },
                            series: {
                                point: {
                                    events: {
                                        click: function() {
                                           var age = this.name
                                           location.href = '/employees/age_analysis_data?age='+age;
                                        }
                                    }
                                }
                            }
                        },
                        // 饼图的数据来源
                        series: [{
                            colorByPoint: true,
                            // 设置饼图各个扇区的数据，注意需要数组类型的数据
                            data: [
                                {name: '50-55岁',y: gon.fifty},
                                {name: '45-50岁',y: gon.forty_five},
                                {name: '40-45岁',y: gon.forty}, 
                                {name: '25-30岁',y: gon.twenty_five}, 
                                {name: '30-35岁',y: gon.thirty}, 
                                {name: '35-40岁',y: gon.thirty_five}, 
                                {name: '25岁以下', y: gon.twenty_five_below}
                            ]
                        }],
                    });
                });
            </script>
        <!-- 年龄分析饼图-结束  --> 

        <!-- 学历分析饼图-开始  -->    
            <!-- 给饼图准备一个合适大小的dom  -->
            <div id="container2" style="min-width:800px;height:600px"></div>
            <!-- 引入highcharts库  -->
            <script src="/assets/javascripts/highcharts.js"></script>
            <script>
                $(function () {
                    var chart2 = $('#container2').highcharts({
                        chart: {
                            plotBackgroundColor: null,
                            plotBorderWidth: null,
                            plotShadow: false,
                            type: 'pie'
                        },
                        title: {
                            text: '学历分析'
                        },
                        // 数据提示框设置
                        tooltip: {
                            headerFormat: '',
                            pointFormat: '{point.name}:<br> 百分比：<b>{point.percentage:.1f}%</b>, <br>数量：<b>{point.y}</b>'
                        },

                        plotOptions: {
                            pie: {
                                allowPointSelect: true,
                                cursor: 'pointer',
                                // 设置点击饼图的事件
                                events: {
                                    click: function(e) {
                                        location.href = e.point.url
                                    }
                                },
                                dataLabels: {
                                    enabled: true,
                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                    style: {
                                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                    }
                                },
                                // 设置是否显示图例
                                showInLegend: true
                            },
                            series: {
                                point: {
                                    events: {
                                        click: function(){
                                            var education = this.name
                                            location.href = '/employees/education_background_analysis_data?education='+education;
                                        }
                                    }
                                }
                            }
                        },
                        // 饼图的数据来源
                        series: [{
                            colorByPoint: true,
                            // 设置饼图各个扇区的数据，注意需要数组类型的数据
                            data: [
                                {name: '中专',y: gon.secondary_school}, 
                                {name: '大学专科',y: gon.university_specialties}, 
                                {name: '高中',y: gon.senior_high_school},
                                {name: '大学本科',y: gon.undergraduate}, 
                                {name: '初中及以下',y: gon.junior_high_school_below},  
                                {name: '技校',y: gon.technical_school}, 
                                {name: '研究生', y: gon.postgraduate}
                            ]
                        }],
                    });
                });
            </script>
        <!-- 学历分析饼图-结束  --> 

        <!-- 年龄分析柱状图-开始  -->
            <!-- 给饼图准备一个合适大小的dom  -->
            <div id="container3" style="min-width:800px;height:900px"></div>
            <!-- 引入highcharts库  -->
            <script src="/assets/javascripts/highcharts.js"></script>
            <script>
                var chart3 = $(function () {
                    $('#container3').highcharts({
                        chart: {
                            type: 'bar'
                            
                        },
                        title: {
                            text: '年龄分析'
                        },
                        xAxis: {
                            lables: {
                                step: 1
                            },
                            categories: gon.bar_workshop
                        },
                        yAxis: {
                            min: 0,
                            lables: {
                                step: 1
                            },
                            title: {
                                text: '水果消费总量'
                            }
                        },
                        tolltip: {
                            enabled: false
                        },
                        legend: {
                            reversed: true
                        },
                        plotOptions: {
                            bar: {
                                pointWidth: 30,
                                pointPadding: 0
                            },
                            series: {
                                stacking: 'normal',
                                point: {
                                    events: {
                                        click: function() {
                                           var workshop = this.category
                                           var age = this.series.name;
                                           location.href = '/employees/age_analysis_data_bar?workshop='+workshop+'&'+'age='+age;
                                        }
                                    }
                                }
                            }
                        },
                        series: [
                            {name: '25岁以下',
                             data: gon.bar_twenty_five_below,},
                            {name: '25-30岁',
                             data: gon.bar_twenty_five},
                            {name: '30-35岁',
                             data: gon.bar_thirty},
                            {name: '35-40岁',
                             data: gon.bar_thirty_five},
                            {name: '40-45岁',
                             data: gon.bar_forty},
                            {name: '45-50岁',
                             data: gon.bar_forty_five},
                            {name: '50-55岁',
                             data: gon.bar_fifty},
                            {name: '55-60岁',
                             data: gon.bar_fifty_five}  
                        ]
                    });
                })
                
            </script>

        <!-- 年龄分析柱状图-结束  -->

        </body>
    </html>